@echo off
chcp 65001 >nul
title ๐ฆ ุงูุชูุงู ูุฏูโูุง ุฑูุจุงู

echo.
echo ===============================================
echo ๐ฆ ุงูุชูุงู ูุฏูโูุง ููุฌูุฏ ุจู ูุณุฑ ุฌุฏุฏ
echo ===============================================
echo.

:: ุชูุธู ูุณุฑ ูุฏูโูุง ุฏุฑ ูพุฑูฺู (ฺฉ ุณุทุญ ุจุงูุงุชุฑ ุงุฒ scripts)
cd ..
set "OLD_PATH=%USERPROFILE%\.ollama\models"
set "NEW_PATH=%CD%\models"

echo ๐ ูุณุฑ ูุฏู: %OLD_PATH%
echo ๐ ูุณุฑ ุฌุฏุฏ: %NEW_PATH%
echo.

:: ุจุฑุฑุณ ูุฌูุฏ ูุฏูโูุง ูุฏู
if not exist "%OLD_PATH%" (
    echo โ ูุณุฑ ูุฏู ุงูุช ูุดุฏ!
    pause
    exit /b 1
)

:: ูุญุงุณุจู ุงูุฏุงุฒู ูุฏูโูุง ููุฌูุฏ
echo ๐ ุฏุฑ ุญุงู ูุญุงุณุจู ุงูุฏุงุฒู ูุฏูโูุง ููุฌูุฏ...
for /f "tokens=3" %%a in ('dir "%OLD_PATH%" /s /-c ^| find "File(s)"') do set "TOTAL_SIZE=%%a"
echo ๐พ ุงูุฏุงุฒู ฺฉู: %TOTAL_SIZE% bytes (~75GB)

:: ุจุฑุฑุณ ูุถุง ุฎุงู
echo ๐ ุจุฑุฑุณ ูุถุง ุฎุงู ุฏุฑุงู...
for /f "tokens=3" %%a in ('dir "%CD%" ^| find "bytes free"') do set "FREE_SPACE=%%a"
echo ๐ฟ ูุถุง ุฎุงู: %FREE_SPACE% bytes

echo.
echo โ๏ธ  ุชูุฌู: ุงู ุนููุงุช ููฺฉู ุงุณุช 30-60 ุฏููู ุทูู ุจฺฉุดุฏ
echo ๐ ูุฏูโูุง ฺฉูพ ูโุดููุฏ (ูู ููุชูู)
echo ๐ ุจุนุฏ ุงุฒ ฺฉูพุ ูุฏูโูุง ูุฏู ุจุงู ูโูุงููุฏ
echo.

set /p confirm="ุขุง ูโุฎูุงูุฏ ุงุฏุงูู ุฏูุฏุ (y/n): "
if /i not "%confirm%"=="y" (
    echo ุนููุงุช ูุบู ุดุฏ.
    pause
    exit /b
)

echo.
echo ๐ ุดุฑูุน ุงูุชูุงู ูุฏูโูุง...
echo.

:: ุงุฌุงุฏ ูพูุดู ููุตุฏ
if not exist "%NEW_PATH%" (
    echo ๐ ุงุฌุงุฏ ูพูุดู ููุตุฏ...
    mkdir "%NEW_PATH%"
)

:: ฺฉูพ ูุฏูโูุง
echo ๐ ฺฉูพ ูุงูโูุง ูุฏู...
echo ุงู ููฺฉู ุงุณุช ฺูุฏ ุฏููู ุทูู ุจฺฉุดุฏ...
xcopy "%OLD_PATH%\*" "%NEW_PATH%\" /E /I /H /Y /Q

if %errorlevel% neq 0 (
    echo โ ุฎุทุง ุฏุฑ ฺฉูพ ูุฏูโูุง!
    pause
    exit /b 1
)

echo โ ฺฉูพ ูุฏูโูุง ฺฉุงูู ุดุฏ!
echo.

:: ุชูุธู ูุชุบุฑ ูุญุท
echo ๐ง ุชูุธู ูุชุบุฑ ูุญุท...
set "OLLAMA_MODELS=%NEW_PATH%"

:: ุชุณุช ูุฏูโูุง
echo ๐งช ุชุณุช ูุฏูโูุง ููุชูู ุดุฏู...
ollama list

echo.
echo ===============================================
echo ๐ ุงูุชูุงู ฺฉุงูู ุดุฏ!
echo ===============================================
echo.

echo โ ูุฏูโูุง ุจุง ููููุช ุจู %NEW_PATH% ููุชูู ุดุฏูุฏ
echo ๐ ุงูุฏุงุฒู ฺฉู: ~75GB
echo ๐ง ูุชุบุฑ ูุญุท ุชูุธู ุดุฏ: OLLAMA_MODELS=%NEW_PATH%

echo.
echo ๐ก ูุฑุญูู ุจุนุฏ:
echo   1. ูุฏูโูุง ุฑุง ุชุณุช ฺฉูุฏ: ollama list
echo   2. ุฑูุจุงู ุฑุง ุฑุงูโุงูุฏุงุฒ ฺฉูุฏ: start_robah.bat
echo   3. ุงฺฏุฑ ููู ฺุฒ ุฏุฑุณุช ฺฉุงุฑ ฺฉุฑุฏุ ูุฏูโูุง ูุฏู ุฑุง ูพุงฺฉ ฺฉูุฏ

echo.
echo ๐๏ธ  ุจุฑุง ูพุงฺฉ ฺฉุฑุฏู ูุฏูโูุง ูุฏู (ุงุฎุชุงุฑ):
echo    rmdir /s /q "%OLD_PATH%"
echo.

pause